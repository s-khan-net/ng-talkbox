<div class="row" style="margin-top:3px">
    <div class="col-sm-0 col-md-1"></div>
    <div class="col-sm-10 col-md-9">
        @for (option of parentOptions; track option; let i = $index) {
        <!-- <div class="col-sm-0 col-md-1"></div> -->
        <div class="row">
            <div class="col-md-12" style="border: 1px solid #CCC; display: flex;gap:3px;padding: 5px;margin: 5px;">
                <div>
                    <input type="text" value="{{option.text.replace('<br>','\n')}}" id="{{option.value}}" maxlength="16"
                        (keyup)="updateOptionText($event, option.value)"
                        [ngStyle]="{'border': option.text.length < 1 ? '2px solid #BB0034': ''}" />
                </div>
                <div >
                    @if (i == 0) {
                    <div>
                        <div class="btn-round" (click)="addOption(option.value)">
                            <i class="bi bi-plus-circle"></i>
                        </div>
                    </div>
                    }
                    @if (i > 0 && i<4) { <div class="btn-group" role="group">
                        <div class="btn-round" (click)="removeOption(option.value)">
                            <i class="bi bi-dash-circle"></i>
                        </div>
                        <div class="btn-round" (click)="addOption(option.value)">
                            <i class="bi bi-plus-circle"></i>
                        </div>
                </div>
                }
                @if (i == 4) {
                <div>
                    <div class="btn-round" (click)="removeOption(option.value)">
                        <i class="bi bi-dash-circle"></i>
                    </div>
                </div>
                }
            </div>
        </div>
    </div>
    }
</div>
</div>
<div class="row">
    <div class="col-sm-11 col-md-11">
        <div style="border: 1px solid #CCC; display: flex;gap:3px;padding: 5px;margin: 5px;height: 100%;">
            @if (fromParent.nextQuestion) {
            <div class="conv-box">
                @for (item of (conv | convDisplay: fromParent.nextQuestion); track item) {
                <div class="conv-item">
                    <div class="linked-question">
                        <div class="row">
                            <div class="col-md-5 col-sm-3 text-right">Next question:</div>
                            <div class="col-md-6 col-sm-5">
                                <select id="{{fromParent.id}}" [(ngModel)]="fromParent.nextQuestion"
                                    (change)="addNextQuestion(fromParent)">
                                    @for (question of conv; track question) {
                                    @if (question.id!='66666-99999-00000' && question.id!= fromParent.id) {
                                    <option id="{{question.id}}" value="{{question.id}}"
                                        [selected]="fromParent.nextQuestion == question.id">
                                        {{question.text}}
                                    </option>
                                    }
                                    }
                                </select>
                            </div>
                            <div class="col-md-1 col-sm-4">
                                <span class="bi bi-x btn-round" title="Remove next question"
                                    (click)="removeNext()"></span>
                            </div>
                        </div>

                    </div>
                    <table style="width:84%">
                        <tr>
                            <td rowspan="2" class="item-abbr-td">
                                <div class="btn-round item-abbr" title="{{(item | convTypeAbbr).desc}}">
                                    {{(item | convTypeAbbr).abbr}}
                                </div>
                            </td>
                            <td class="text-center">
                                {{item.text}}
                            </td>
                        </tr>
                        @if (item.options) {
                        <tr>
                            <td style="text-align:center">
                                @for (option of item.options; track option) {
                                <div class="option-button">
                                    {{option.text}}</div>
                                }
                            </td>
                        </tr>
                        }
                    </table>
                </div>
                }
            </div>
            }
            @if (!fromParent.nextQuestion) {
            <div class="row linked-question" style="margin-right:0px">
                <div class="row">
                    <div class="col-md-11">
                        A next question is not configured for this question, therefore, the next one in the list will
                        be
                        considered as the next question.
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">select the question:</div>
                    <div class="col-md-8">
                        <select id="{{fromParent.id}}" [(ngModel)]="fromParent.nextQuestion"
                            (change)="addNextQuestion(fromParent)">
                            @for (question of conv; track question) {
                            @if (question.id!='66666-99999-00000' && question.id!= fromParent.id) {
                            <option id="{{question.id}}" value="{{question.id}}"
                                [selected]="fromParent.nextQuestion == question.id">
                                {{question.text}}
                            </option>
                            }
                            }
                        </select>
                    </div>
                </div>
            </div>
            }
        </div>
    </div>
</div>