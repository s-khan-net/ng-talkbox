<div class="modal-header">
    <div class="modal-title">Hi there!</div>
    <!-- <div class="btn-round" (click)="dismiss()" aria-label="Close">
        <i class="bi bi-x-circle"></i>
    </div> -->
</div>
<div class="modal-body">
    <div class="row">
        <div class="col-md-12">
            <app-text-editor [text]="fromParent.text" (updateText)="onUpdatetext($event)"></app-text-editor>
        </div>
    </div>
    <div *ngIf="fromParent.type == 'option'">
        <div class="row" *ngFor="let option of parentOptions; let i = index" style="margin-top:3px">
            <div class="col-sm-0 col-md-1"></div>
            <div class="col-sm-10 col-md-9">
                <div class="row">
                    <div class="col-md-12">
                        <input type="text" value="{{option.text}}" id="{{option.value}}" maxlength="32"
                            (keyup)="updateOptionText($event, option.value)"
                            [ngStyle]="{'border': option.text.length < 1 ? '2px solid #BB0034': ''}" />
                    </div>
                </div>
                <!-- <div class="row">
                    <div class="offset-md-1 col-md-11 linked-question left-padding-0">
                        <span class="bi bi-gear-wide-connected btn-round" title="Edit" style="float: right;"
                            (click)="linkedQuestionEdit(fromParent.id,option.value)"></span>
                        <div>Linked question id: {{fromParent.id}}{{option.value}}</div>
                        <div *ngFor="let item of (conv | convDisplay: fromParent.id:option.value)">
                            <table style="width:84%">
                                <tr>
                                    <td rowspan="2" class="item-abbr-td">{{item.id}}
                                        <div class="btn-round item-abbr" title="{{(item | convTypeAbbr).desc}}">
                                            {{(item | convTypeAbbr).abbr}}
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        {{item.text}}
                                    </td>
                                </tr>
                                <tr *ngIf="item.options">
                                    <td>
                                        <div class="option-button" *ngFor="let option of item.options">{{option.text}}
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div> -->
                <div class="row">
                    <div class="offset-md-1 col-md-11 left-padding-0">

                        <div class="conv-box"
                            *ngIf="(conv | convDisplay: fromParent.id:option.value).length > 0; else createTemplate">
                            <div class="conv-item"
                                *ngFor="let item of (conv | convDisplay: fromParent.id:option.value)">
                                <div class="linked-question">Linked question id: {{fromParent.id}}{{option.value}}
                                    <span class="bi bi-gear-wide-connected btn-round" title="Edit"
                                        (click)="linkedQuestionEdit(fromParent.id,option.value)"></span>
                                </div>
                                <table style="width:84%">
                                    <tr>
                                        <td rowspan="2" class="item-abbr-td">
                                            <div class="btn-round item-abbr" title="{{(item | convTypeAbbr).desc}}">
                                                {{(item | convTypeAbbr).abbr}}
                                            </div>
                                        </td>
                                        <td class="text-center">
                                            {{item.text}}
                                        </td>
                                    </tr>
                                    <tr *ngIf="item.options">
                                        <td style="text-align:center">
                                            <div class="option-button" *ngFor="let option of item.options">
                                                {{option.text}}</div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <ng-template #createTemplate>
                            <div class="linked-question">
                                link a question (dropdown with all questions????)
                            </div>
                        </ng-template>

                    </div>
                </div>
            </div>
            <div class="col-sm-2 col-md-2 left-padding-0">
                <div *ngIf="i == 0">
                    <div class="btn-round" (click)="addOption(option.value)">
                        <i class="bi bi-plus-circle"></i>
                    </div>
                </div>
                <div class="btn-group" role="group" *ngIf="i > 0 && i<4">
                    <div class="btn-round" (click)="removeOption(option.value)">
                        <i class="bi bi-dash-circle"></i>
                    </div>
                    <div class="btn-round" (click)="addOption(option.value)">
                        <i class="bi bi-plus-circle"></i>
                    </div>
                </div>
                <div *ngIf="i == 4">
                    <div class="btn-round" (click)="removeOption(option.value)">
                        <i class="bi bi-dash-circle"></i>
                    </div>
                </div>
            </div>
            <div class="col-sm-0 col-md-1"></div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <div class="btn-group" role="group">
        <button type="button" class="btn btn-outline-primary" ngbAutofocus (click)="saveOptions()">Save</button>
        <button type="button" class="btn btn-outline-primary" (click)="dismiss(true)">Cancel</button>
    </div>
</div>